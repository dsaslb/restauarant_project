{% extends 'base_modern.html' %}
{% block title %}최고 관리자 대시보드{% endblock %}
{% block content %}
<!-- 헤더 섹션 -->
<div class="bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 text-white rounded-2xl p-8 mb-8 shadow-2xl">
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-4xl font-bold mb-2">👑 최고 관리자 대시보드</h1>
      <p class="text-indigo-100 text-lg">전체 시스템 통합 관리 및 모니터링</p>
      <div class="flex items-center space-x-6 mt-4">
        <div class="flex items-center space-x-2">
          <span class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></span>
          <span class="text-sm">시스템 정상 운영 중</span>
        </div>
        <div class="flex items-center space-x-2">
          <span class="text-sm">마지막 업데이트: {{ momentjs().strftime('%Y-%m-%d %H:%M') }}</span>
        </div>
      </div>
    </div>
    <div class="text-right">
      <div class="text-4xl font-bold">{{ total_branches }}</div>
      <div class="text-indigo-100">관리 매장</div>
      <div class="text-sm text-indigo-200 mt-1">총 {{ total_staff }}명 직원</div>
    </div>
  </div>
</div>

<!-- 실시간 상태 카드 -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
  <!-- 시스템 상태 -->
  <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border-l-4 border-green-500 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">시스템 상태</p>
        <p class="text-3xl font-bold text-green-600">정상</p>
        <p class="text-xs text-gray-500 mt-1">99.9% 가동률</p>
      </div>
      <div class="w-14 h-14 bg-green-100 dark:bg-green-900 rounded-xl flex items-center justify-center">
        <span class="text-2xl">✅</span>
      </div>
    </div>
  </div>
  
  <!-- 활성 사용자 -->
  <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border-l-4 border-blue-500 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">활성 사용자</p>
        <p class="text-3xl font-bold text-blue-600">{{ total_staff }}</p>
        <p class="text-xs text-gray-500 mt-1">현재 접속 중</p>
      </div>
      <div class="w-14 h-14 bg-blue-100 dark:bg-blue-900 rounded-xl flex items-center justify-center">
        <span class="text-2xl">👥</span>
      </div>
    </div>
  </div>
  
  <!-- 대기 알림 -->
  <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border-l-4 border-yellow-500 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">대기 알림</p>
        <p class="text-3xl font-bold text-yellow-600">{{ notifications|length }}</p>
        <p class="text-xs text-gray-500 mt-1">처리 대기 중</p>
      </div>
      <div class="w-14 h-14 bg-yellow-100 dark:bg-yellow-900 rounded-xl flex items-center justify-center">
        <span class="text-2xl">🔔</span>
      </div>
    </div>
  </div>
  
  <!-- 총 매출 -->
  <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border-l-4 border-purple-500 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">총 매출</p>
        <p class="text-3xl font-bold text-purple-600">{{ total_sales | int | comma }}원</p>
        <p class="text-xs text-gray-500 mt-1">이번 달</p>
      </div>
      <div class="w-14 h-14 bg-purple-100 dark:bg-purple-900 rounded-xl flex items-center justify-center">
        <span class="text-2xl">💰</span>
      </div>
    </div>
  </div>
</div>

<!-- 관리 메뉴 그리드 -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
  <!-- 직원 관리 -->
  <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-700">
    <div class="flex items-center space-x-4 mb-6">
      <div class="w-16 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg">
        <span class="text-3xl text-white">👥</span>
      </div>
      <div>
        <h3 class="text-xl font-bold text-gray-900 dark:text-white">직원 관리</h3>
        <p class="text-sm text-gray-500 dark:text-gray-400">전체 직원 계정 관리</p>
      </div>
    </div>
    <div class="space-y-3 mb-6">
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">총 직원:</span>
        <span class="font-bold text-blue-600">{{ total_staff }}명</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">활성 계정:</span>
        <span class="font-bold text-green-600">{{ total_staff }}개</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">관리자:</span>
        <span class="font-bold text-purple-600">5명</span>
      </div>
    </div>
    <a href="/admin/staff-management" class="block w-full text-center bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-6 rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl">
      직원 관리하기
    </a>
  </div>

  <!-- 매장 관리 -->
  <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-700">
    <div class="flex items-center space-x-4 mb-6">
      <div class="w-16 h-16 bg-gradient-to-br from-green-400 to-green-600 rounded-2xl flex items-center justify-center shadow-lg">
        <span class="text-3xl text-white">🏪</span>
      </div>
      <div>
        <h3 class="text-xl font-bold text-gray-900 dark:text-white">매장 관리</h3>
        <p class="text-sm text-gray-500 dark:text-gray-400">매장 정보 및 설정 관리</p>
      </div>
    </div>
    <div class="space-y-3 mb-6">
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">총 매장:</span>
        <span class="font-bold text-green-600">{{ total_branches }}개</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">운영 중:</span>
        <span class="font-bold text-green-600">{{ total_branches }}개</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">신규 등록:</span>
        <span class="font-bold text-blue-600">2개</span>
      </div>
    </div>
    <a href="/admin/branch-management" class="block w-full text-center bg-gradient-to-r from-green-500 to-green-600 text-white py-3 px-6 rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl">
      매장 관리하기
    </a>
  </div>

  <!-- 시스템 모니터링 -->
  <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-700">
    <div class="flex items-center space-x-4 mb-6">
      <div class="w-16 h-16 bg-gradient-to-br from-purple-400 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg">
        <span class="text-3xl text-white">📊</span>
      </div>
      <div>
        <h3 class="text-xl font-bold text-gray-900 dark:text-white">시스템 모니터링</h3>
        <p class="text-sm text-gray-500 dark:text-gray-400">실시간 시스템 상태 확인</p>
      </div>
    </div>
    <div class="space-y-3 mb-6">
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">서버 상태:</span>
        <span class="font-bold text-green-600">정상</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">DB 연결:</span>
        <span class="font-bold text-green-600">연결됨</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">응답 시간:</span>
        <span class="font-bold text-blue-600">45ms</span>
      </div>
    </div>
    <a href="/admin/system-monitoring" class="block w-full text-center bg-gradient-to-r from-purple-500 to-purple-600 text-white py-3 px-6 rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl">
      모니터링 보기
    </a>
  </div>

  <!-- 알림 관리 -->
  <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-700">
    <div class="flex items-center space-x-4 mb-6">
      <div class="w-16 h-16 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-2xl flex items-center justify-center shadow-lg">
        <span class="text-3xl text-white">🔔</span>
      </div>
      <div>
        <h3 class="text-xl font-bold text-gray-900 dark:text-white">알림 관리</h3>
        <p class="text-sm text-gray-500 dark:text-gray-400">시스템 알림 및 공지사항</p>
      </div>
    </div>
    <div class="space-y-3 mb-6">
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">미읽 알림:</span>
        <span class="font-bold text-yellow-600">{{ notifications|length }}개</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">전체 알림:</span>
        <span class="font-bold text-gray-900 dark:text-white">{{ notifications|length + 5 }}개</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">긴급 알림:</span>
        <span class="font-bold text-red-600">1개</span>
      </div>
    </div>
    <a href="/notifications" class="block w-full text-center bg-gradient-to-r from-yellow-500 to-yellow-600 text-white py-3 px-6 rounded-xl hover:from-yellow-600 hover:to-yellow-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl">
      알림 확인하기
    </a>
  </div>

  <!-- 데이터 백업 -->
  <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-700">
    <div class="flex items-center space-x-4 mb-6">
      <div class="w-16 h-16 bg-gradient-to-br from-red-400 to-red-600 rounded-2xl flex items-center justify-center shadow-lg">
        <span class="text-3xl text-white">💾</span>
      </div>
      <div>
        <h3 class="text-xl font-bold text-gray-900 dark:text-white">데이터 백업</h3>
        <p class="text-sm text-gray-500 dark:text-gray-400">시스템 데이터 백업 관리</p>
      </div>
    </div>
    <div class="space-y-3 mb-6">
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">최근 백업:</span>
        <span class="font-bold text-green-600">오늘</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">백업 상태:</span>
        <span class="font-bold text-green-600">완료</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">백업 크기:</span>
        <span class="font-bold text-blue-600">2.3GB</span>
      </div>
    </div>
    <a href="/admin/backup_management" class="block w-full text-center bg-gradient-to-r from-red-500 to-red-600 text-white py-3 px-6 rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl">
      백업 관리
    </a>
  </div>

  <!-- 시스템 설정 -->
  <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-700">
    <div class="flex items-center space-x-4 mb-6">
      <div class="w-16 h-16 bg-gradient-to-br from-indigo-400 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg">
        <span class="text-3xl text-white">⚙️</span>
      </div>
      <div>
        <h3 class="text-xl font-bold text-gray-900 dark:text-white">시스템 설정</h3>
        <p class="text-sm text-gray-500 dark:text-gray-400">전체 시스템 설정 관리</p>
      </div>
    </div>
    <div class="space-y-3 mb-6">
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">보안 레벨:</span>
        <span class="font-bold text-green-600">높음</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">자동 업데이트:</span>
        <span class="font-bold text-blue-600">활성화</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <span class="text-gray-600 dark:text-gray-300">모니터링:</span>
        <span class="font-bold text-green-600">실시간</span>
      </div>
    </div>
    <a href="/admin/system-settings" class="block w-full text-center bg-gradient-to-r from-indigo-500 to-indigo-600 text-white py-3 px-6 rounded-xl hover:from-indigo-600 hover:to-indigo-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl">
      설정 관리
    </a>
  </div>
</div>

<!-- 실시간 모니터링 섹션 -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
  <!-- 최근 활동 로그 -->
  <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700">
    <div class="flex items-center justify-between mb-6">
      <h3 class="text-xl font-bold text-gray-900 dark:text-white">📋 최근 활동 로그</h3>
      <span class="text-sm text-gray-500">실시간</span>
    </div>
    <div class="space-y-4 max-h-80 overflow-y-auto">
      <div class="flex items-center space-x-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
        <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
        <div class="flex-1">
          <p class="text-sm font-medium text-gray-900 dark:text-white">새 직원 등록</p>
          <p class="text-xs text-gray-500">김철수님이 등록되었습니다.</p>
        </div>
        <span class="text-xs text-gray-400">2분 전</span>
      </div>
      <div class="flex items-center space-x-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg">
        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
        <div class="flex-1">
          <p class="text-sm font-medium text-gray-900 dark:text-white">매장 정보 업데이트</p>
          <p class="text-xs text-gray-500">강남점 정보가 업데이트되었습니다.</p>
        </div>
        <span class="text-xs text-gray-400">5분 전</span>
      </div>
      <div class="flex items-center space-x-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg">
        <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
        <div class="flex-1">
          <p class="text-sm font-medium text-gray-900 dark:text-white">시스템 알림</p>
          <p class="text-xs text-gray-500">새로운 업데이트가 있습니다.</p>
        </div>
        <span class="text-xs text-gray-400">10분 전</span>
      </div>
      <div class="flex items-center space-x-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg">
        <div class="w-2 h-2 bg-purple-500 rounded-full"></div>
        <div class="flex-1">
          <p class="text-sm font-medium text-gray-900 dark:text-white">데이터 백업</p>
          <p class="text-xs text-gray-500">일일 백업이 완료되었습니다.</p>
        </div>
        <span class="text-xs text-gray-400">1시간 전</span>
      </div>
    </div>
  </div>

  <!-- 시스템 통계 -->
  <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700">
    <div class="flex items-center justify-between mb-6">
      <h3 class="text-xl font-bold text-gray-900 dark:text-white">📊 시스템 통계</h3>
      <span class="text-sm text-gray-500">이번 주</span>
    </div>
    <div class="space-y-6">
      <div>
        <div class="flex justify-between items-center mb-2">
          <span class="text-sm font-medium text-gray-600 dark:text-gray-400">CPU 사용률</span>
          <span class="text-sm font-bold text-blue-600">45%</span>
        </div>
        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
          <div class="bg-blue-500 h-2 rounded-full" style="width: 45%"></div>
        </div>
      </div>
      <div>
        <div class="flex justify-between items-center mb-2">
          <span class="text-sm font-medium text-gray-600 dark:text-gray-400">메모리 사용률</span>
          <span class="text-sm font-bold text-green-600">62%</span>
        </div>
        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
          <div class="bg-green-500 h-2 rounded-full" style="width: 62%"></div>
        </div>
      </div>
      <div>
        <div class="flex justify-between items-center mb-2">
          <span class="text-sm font-medium text-gray-600 dark:text-gray-400">디스크 사용률</span>
          <span class="text-sm font-bold text-yellow-600">78%</span>
        </div>
        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
          <div class="bg-yellow-500 h-2 rounded-full" style="width: 78%"></div>
        </div>
      </div>
      <div>
        <div class="flex justify-between items-center mb-2">
          <span class="text-sm font-medium text-gray-600 dark:text-gray-400">네트워크</span>
          <span class="text-sm font-bold text-purple-600">정상</span>
        </div>
        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
          <div class="bg-purple-500 h-2 rounded-full" style="width: 100%"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 빠른 액션 버튼 -->
<div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700">
  <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6">⚡ 빠른 액션</h3>
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
    <button class="flex flex-col items-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors">
      <span class="text-2xl mb-2">👤</span>
      <span class="text-sm font-medium text-gray-900 dark:text-white">직원 추가</span>
    </button>
    <button class="flex flex-col items-center p-4 bg-green-50 dark:bg-green-900/20 rounded-xl hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors">
      <span class="text-2xl mb-2">🏪</span>
      <span class="text-sm font-medium text-gray-900 dark:text-white">매장 등록</span>
    </button>
    <button class="flex flex-col items-center p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl hover:bg-yellow-100 dark:hover:bg-yellow-900/30 transition-colors">
      <span class="text-2xl mb-2">📢</span>
      <span class="text-sm font-medium text-gray-900 dark:text-white">공지사항</span>
    </button>
    <button class="flex flex-col items-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors">
      <span class="text-2xl mb-2">📊</span>
      <span class="text-sm font-medium text-gray-900 dark:text-white">리포트</span>
    </button>
  </div>
</div>

<!-- JavaScript for animations -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // 카드 애니메이션
  const cards = document.querySelectorAll('.grid > div');
  cards.forEach((card, index) => {
    card.style.opacity = '0';
    card.style.transform = 'translateY(20px)';
    setTimeout(() => {
      card.style.transition = 'all 0.6s ease';
      card.style.opacity = '1';
      card.style.transform = 'translateY(0)';
    }, index * 100);
  });

  // 실시간 업데이트 시뮬레이션
  setInterval(() => {
    const statusIndicator = document.querySelector('.animate-pulse');
    if (statusIndicator) {
      statusIndicator.classList.remove('animate-pulse');
      setTimeout(() => {
        statusIndicator.classList.add('animate-pulse');
      }, 100);
    }
  }, 3000);
});
</script>
{% endblock %} 